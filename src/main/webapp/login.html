<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Video Storage</title>
    <script type="application/javascript">
        function redirectToMainPage() {
            var posLogin = window.location.href.indexOf('login');
            var url = window.location.href.substring(0, posLogin) + 'videos.html';
            window.location.href = url;
        }
        function signIn() {
            document.getElementById('btnSignIp').disabled = "disabled";
            document.getElementById('btnSignUp').disabled = "disabled";
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (xhttp.readyState == 4 && xhttp.status == 200) {
                    redirectToMainPage();
                }
            };
            xhttp.open("POST", "/resources/user/signin", true);
            xhttp.setRequestHeader("Content-Type", "application/json");
            xhttp.send(JSON.stringify({
                email: document.getElementById('emailSignIn').value,
                password: document.getElementById('passwordSignIn').value
            }));
        }
        function signUp() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (xhttp.readyState == 4 && xhttp.status == 200) {
                    redirectToMainPage();
                }
            };
            xhttp.open("POST", "/resources/user/signup", true);
            xhttp.setRequestHeader("Content-Type", "application/json");
            xhttp.send(JSON.stringify({
                firstName: document.getElementById('firstNameSignUp').value,
                lastName: document.getElementById('lastNameSignUp').value,
                email: document.getElementById('emailSignUp').value,
                password: document.getElementById('passwordSignUp').value
            }));
        }
        function onKeyDownHandler(event) {
            if (event.keyCode == 13) {
                signIn();
            }
        }
    </script>
</head>
<body>
<div class="container">
    <div class="login">
        <div class="row">
            <span>Username or email</span>
            <input id="emailSignIn" type="text" onkeydown="onKeyDownHandler(event)" placeholder="Username or email"/>
        </div>
        <div class="row">
            <span>Password</span>
            <input id="passwordSignIn" type="password" onkeydown="onKeyDownHandler(event)" placeholder="Password"/>
        </div>
        <div class="row">
            <button id="btnSignIp" onclick="signIn()">Log In</button>
        </div>
    </div>
    <div class="register">
        <div class="row">
            <span>Are you new to Video Storage?</span>
        </div>
        <div class="row">
            <span>Sign up</span>
        </div>
        <div class="row">
            <input id="firstNameSignUp" type="text" placeholder="First Name"/>
            <input id="lastNameSignUp" type="text" placeholder="Last Name"/>
        </div>
        <div class="row">
            <input id="emailSignUp" type="text" placeholder="Username or email"/>
        </div>
        <div class="row">
            <input id="passwordSignUp" type="password" placeholder="Password"/>
        </div>
        <div class="row">
            <input id="retypePasswordSignUp" type="password" placeholder="Retype Password"/>
        </div>
        <div class="row">
            <span>Select you birthday</span>
        </div>
        <div class="row">
            <select>
                <option value="" disabled selected>Day</option>
            </select>
            <select>
                <option value="" disabled selected>Month</option>
            </select>
            <select>
                <option value="" disabled selected>Year</option>
            </select>
        </div>
        <div class="row">
            <button id="btnSignUp" onclick="signUp()">Sign Up</button>
        </div>
    </div>
</div>
</body>
</html>